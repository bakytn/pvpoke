Options -Indexes

<IfModule mod_rewrite.c>
	RewriteEngine On
	RewriteBase /pvpoke/src/

	# Serve existing files/directories as-is
	RewriteCond %{REQUEST_FILENAME} -f [OR]
	RewriteCond %{REQUEST_FILENAME} -d
	RewriteRule ^ - [L]

	# Home
	RewriteRule ^$ index.php [L,QSA]

	# Rankings
	RewriteRule ^rankings/?$ rankings.php [L,QSA]
	RewriteRule ^rankings/([^/]+)/([^/]+)/([^/]+)/([^/]+)/?$ rankings.php?cup=$1&cp=$2&cat=$3&p=$4 [L,QSA]
	RewriteRule ^rankings/([^/]+)/([^/]+)/([^/]+)/?$ rankings.php?cup=$1&cp=$2&cat=$3 [L,QSA]

	# Custom Rankings
	RewriteRule ^custom-rankings/?$ custom-rankings.php [L,QSA]

	# Battle (basic + multi share links)
	RewriteRule ^battle/?$ battle.php [L,QSA]
	RewriteRule ^battle/(multi|matrix)/?$ battle.php?mode=$1 [L,QSA]
	RewriteRule ^battle/multi/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)(/.*)?$ battle.php?mode=multi&cp=$1&cup=$2&p1=$3&s=$4&m1=$5&cms=$6 [L,QSA]

	# Team Builder
	RewriteRule ^team-builder/?$ team-builder.php [L,QSA]

	# Train
	RewriteRule ^train/?$ train/index.php [L,QSA]
	RewriteRule ^train/analysis/?$ train/analysis.php [L,QSA]
	RewriteRule ^train/analytics/?$ train/analytics.php [L,QSA]
	RewriteRule ^train/editor/?$ train/editor.php [L,QSA]

	# Moves / Pokedex
	RewriteRule ^moves/?$ moves.php [L,QSA]
	RewriteRule ^moves/(fast|charged|explore)/?$ moves.php?mode=$1 [L,QSA]
	RewriteRule ^pokedex/?$ pokedex.php [L,QSA]

	# Attack CMP Chart
	RewriteRule ^attack-cmp-chart/?$ attack-cmp-chart.php [L,QSA]
	RewriteRule ^attack-cmp-chart/([^/]+)/([^/]+)/?$ attack-cmp-chart.php?cup=$1&cp=$2 [L,QSA]

	# Ranker tools
	RewriteRule ^ranker/?$ ranker.php [L,QSA]
	RewriteRule ^rankersandbox/?$ rankersandbox.php [L,QSA]

	# Settings
	RewriteRule ^settings/?$ settings.php [L,QSA]

	# GM Editor
	RewriteRule ^gm-editor/?$ gm-editor/index.php [L,QSA]
	RewriteRule ^gm-editor/pokemon/?$ gm-editor/pokemon.php [L,QSA]
	RewriteRule ^gm-editor/pokemon/([^/]+)/?$ gm-editor/pokemon.php?p=$1 [L,QSA]
	RewriteRule ^gm-editor/moves/?$ gm-editor/move.php [L,QSA]
	RewriteRule ^gm-editor/moves/([^/]+)/?$ gm-editor/move.php?p=$1 [L,QSA]
</IfModule>
